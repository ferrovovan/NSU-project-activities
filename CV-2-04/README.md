# Задача CV-2-04


### Описание задачи
На основе CV-1-12 объединить маски для нескольких цветов (например, красный и синий).  
**Подробное руководство по воплощению задачи:**
1. Создайте маску для красного (CV-1-12).
2. Создайте маску для синего (аналогично, диапазон [100,100,100]–[130,255,255]).
3. Объедините маски с помощью cv2.bitwise_or().
4. Примените к изображению.
5. Отобразите результат.

Список используемых библиотек: **numpy**, **opencv**  
Источники данных: Синтетические данные  
Материалы для изучения:  
* [Вводное руководство](https://docs.opencv.org/4.x/d3/df2/tutorial_py_basic_ops.html)
* [Алгоритм Уайлера — Атертона (EN)](https://en.wikipedia.org/wiki/Weiler–Atherton_clipping_algorithm)


### Требования
* Python 3.8 или выше  
  (используются f-строки и типовые аннотации).
* Библиотеки:  
  - numpy
  - opencv

##### Установка зависимостей
```bash
pip install -r requirements.txt
```

Для Arch Linux
```bash
sudo pacman -S python-opencv python-numpy
```

### Документация (описание воплощения)

Решение хранится в одном файле `combine_masks.py`.

Всего реализовано 5 ключевых функций:

- `create_red_mask(image_bgr: np.ndarray) -> np.ndarray`  
    Создание маски для красного цвета.  
    Используются два диапазона в пространстве HSV, так как красный цвет «замыкается» на границе шкалы оттенков (0° и 180°).  
    Результат — двоичная маска, где белым цветом отмечены красные пиксели.
    
- `create_blue_mask(image_bgr: np.ndarray) -> np.ndarray`  
    Создание маски для синего цвета.  
    Диапазон HSV задаётся `[100,100,100] – [130,255,255]`.  
    Результат — двоичная маска для синих областей изображения.
    
- `combine_masks(mask1: np.ndarray, mask2: np.ndarray) -> np.ndarray`  
    Объединение двух масок через побитовую операцию `OR`.  
    На итоговой маске белым отмечаются пиксели, принадлежащие хотя бы одной из исходных масок.
    
- `apply_mask(image_bgr: np.ndarray, mask: np.ndarray) -> np.ndarray`  
    Применение объединённой маски к исходному изображению.  
    Сохраняются только пиксели красного и синего цветов, остальные зануляются.
    
- `show_result(original: np.ndarray, mask: np.ndarray, result: np.ndarray) -> None`  
    Отображение исходного изображения, итоговой маски и результата выделения цветов в отдельных окнах.
    

---

В файле предусмотрены два сценария запуска:

- `--example_synthetic` — создание синтетического изображения с красным и синим кругами.  
    На нём демонстрируется работа масок и их объединения.
    
- `--file <путь>` — загрузка реального изображения с диска, построение масок и выделение красных и синих областей.
    

Примеры запуска:

```bash
python3 cv-2-04_combine_masks.py --example_synthetic
```

```bash
python3 cv-2-04_combine_masks.py --file mypic.png
```

----

Для разбора аргументов командной строки используется модуль **argparse** с взаимоисключающей группой параметров.

